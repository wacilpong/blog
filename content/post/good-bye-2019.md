---
title: "Good bye 2019"
date: "2019-12-27"
tags: ["회고"]
draft: true
---

난생 처음 쓰는 회고. 아주 간단하게 월별로 내가 뭘 했는지 한번 기록해보자.

<br />

## 월별기록

- [1월, 2월](#1-2)
  - 프론트엔드 개발자, 혹은 팬케이크형 인간으로의 진화
  - 이직을 결심하게 된 이유
- [3월](#3)
  - React? Angular? 채용과정에서의 과제
  - 공부, 공부, 공부!
- [4월, 5월](#4-5)
  - React 묻고 리팩토링 더블로 가!
  - Typescript에 대한 얇고 쓸모있는 깨달음
  - 예상치 못한 변수의 등장
  - 협업 컨벤션 만들기
- [6월](#6)
  - css도 모듈화가 필요하다구요!
  - 어푸어푸, 물이 너무 좋은데 왜 수영을 못하지?
- [7월](#7)
  - 모여서 각자 코딩하지만 지식은 같이 올라가는 magic ☆
  - 실무에서의 첫 테스트 코드
- [8월](#8)
  - SEO 삽질
  - Ruby on rails, Javascript(?) 삽질
  - flex 로 grid 해버렸자너, 나만의 공식
  - 동해에는 해파리가 많아요
- [9월](#9)
  - 프로젝트에 디버깅 툴 적용해보기, ft. sentry

* [10월](#10)
* 11월
* 12월

<br /><hr />

## 1월, 2월

#### **_프론트엔드 개발자, 혹은 팬케이크형 인간으로의 진화_**

이때는 초대권 기반의 티켓 전달 서비스 회사에 다녔는데, 처음으로 프론트엔드 개발자 포지션으로 1년여간 일했다. Angular 프레임워크로 된 기존 프로젝트를 유지보수 및 개발했고, 굉장히 규모가 작은 스타트업이어서 프론트엔드 전담개발, 서비스 기획, UI/UX, 심지어 IR까지 했던...

나는 언론정보학과(!)를 전공하여 발표에 그나마 능했던 직원으로서, VC 앞에서 발표까지 했다. 발표가 나쁘진 않았던 모양인지 성공적으로 투자유치까지 했었다. 하지만 정작 중요한 본업, 개발에 많은 시간을 쓰지 못하게 되어 갔다.

<br /><br />

---

## 3월

#### **_이직을 결심하게 된 이유_**

1년여간 다녔던 회사에서 처음으로 마크업도 제대로 해보고, SPA도 처음 다뤄봐서 의미는 있었지만, 협업에 대한 갈망이 커졌다. 다른 개발자들과 코드리뷰도 하고 함께 토론하면서 발전하고 싶다는 생각이 커졌다. 물론 우리의 친구인 구글과 스택오버플로우, 그리고 정보의 바다인 웹과 함께라면 얼마든지 발전할 수 있겠지만...! 혼자 있으면 확실히 나태해진다. 부정할 수 없다. 특히 개발자가 혼자여서 실무 위주로 빠르게 일을 쳐내야 했기 때문에 더더욱 구조에 대한 고민이나 코드 품질에 대한 생각을 하기가 어려웠다.

그래서 이직을 결심했다.

<br />

#### **_React? Angular? 채용과정에서의 과제_**

이번에 내가 지원했던 대부분의 회사는 알고리즘 테스트보다는 과제 위주였다. 대부분의 회사 주업무가 React 기반의 서비스 개발이었으나, 과제에서는 어떤 프레임워크 or 라이브러리를 쓰든, 혹은 바닐라로 하든 상관없는 곳이 대부분이었다. 그런데 내가 지원한 회사의 과제들이 규모가 작고, 상태관리를 어떻게 할 것인지가 중요한 과제들이었기 때문에 주로 React를 사용해서 과제를 제출했다. 이때 React를 처음 써봤는데, 뭔가 앵귤러를 할 때와 굉장히 다른 느낌이었다. 단방향으로 이루어지는 데이터 흐름이 이해하기 어려웠고, `props`와 `state` 개념도 잘 와닿진 않았다.

다만, React는 함수형과 정말 궁합이 잘 맞는다는 생각이 들었다. 함수형, 함수형 말만 들었지 도대체 어떻게 쓰는 것인가 이해가 가지 않았는데, React의 가장 핵심 메소드라고 할 수 있는 `setState()`자체가 함수형스러웠다! 왜냐하면 이 녀석은 항상 새로운 객체를 반환한다. 따라서 객체는 불변함을 유지하게 될 뿐만 아니라, 불변해야만 이전 state를 기억하여 재렌더링을 일으킬 수 있다. 하지만 아쉽게도 과제를 빠르게 끝내야 했기에 제대로 이해하지 못한 채로 기능구현에 급급하여 제출해서 아쉬웠다.

<br />

#### **_공부, 공부, 공부!_**

그리고 과제를 하면서 깨달은 것은, 생각보다 내가 알던 세계는 너무 좁았다는 것이다. 부끄럽게도 자바스크립트 문법 자체를 헷갈려서 오래 걸리거나 해내지 못한 게 많았다. 객체의 불변성을 유지하면서 코드를 작성하는 연습도 되어있지 않았다. 이러한 이직과정을 통해 자바스크립트에 대한 부족함을 많이 느껴 좌절했지만, 학습에 대한 동기부여가 되기도 했다.

<br /><br />

---

## 4월, 5월

#### **_React 묻고 리팩토링 더블로 가!_**

과제를 제출했던 회사들 중에 한곳에 합격하여 현재도 다니고 있다. 들어와서 두 달 정도는 React 생태계에 대해 이해했다. 그런데 기존에 있던 코드품질이 생각보다 좋은 편이 아니어서 리팩토링까지 함께 해야했다. 리덕스로 거의 모든(!!) 상태를 관리하고 있던 프로젝트여서, 상황에 맞게 분리시키는 작업과 더불어 React `v16.8`에서 도입된 hooks를 이용해 클래스형 컴포넌트들을 함수형 컴포넌트로 리팩토링했다. 내가 들어왔을 때는 큰 기능 하나를 만들어야했기 때문에 기능구현을 하면서 진행했다.

<br />

#### **_Typescript에 대한 얇고 쓸모있는 깨달음_**

이 과정에서 기존 코드나 React 생태계, 심지어 자바스크립트도 깊이 있게 모른 채로 진행해서 삽질을 좀 많이 했다. 그래도 별 수 있나. 모르는 부분은 집에서 새벽까지 했다... 해당 프로젝트에 `typescript`도 얹었다. 여기서 또! 부끄러웠던 지점은, 앵귤러로 개발할 때는 타입스크립트의 소중함을 몰랐다는 것... 꼭 필요한 부분도 아닌데 `any`로 타입을 허용해 타입스크립트의 장점을 활용하지 못했다. 그런데 이번 기회에 ts를 좀더 심도있게 해보면서 활용할 지점이 많다는 걸 알았다.

<br />

- API 혹은 외부 데이터에 대한 타입을 알 수 있다는 점만으로도 해당 데이터를 예측할 수 있으니 생산성이 올라갔다.<br />
- 또한 컴파일 단계에서 걸러주니 타입에러가 날 염려가 없다. 자바스크립트는 의도치 않은 타입 에러를 내는 경우가 많다. 돔 렌더링이 이루어지지 않았는데 참조하려고 한다거나, 정의되지 않은(`undefined`) 프로퍼티나 메소드를 참조하려고 한다거나...<br />
- 그리고 코드가 Testable하게 쓰여진다! 실제로 테스트코드를 작성했는지 여부와 무관하게, 지정하지 않은 타입이 들어올 수 없는 안전한 코드를 작성하게 된다. 즉, 들어오는 값에 대해 어느정도 제어할 수 있고, 어떤 값이 반환될 지도 알 수 있기 때문이다.

<br />

#### **_예상치 못한 변수의 등장_**

그런데 일을 하면서 예상치 못한 변수가 있었는데, 바로 백오피스 페이지였다. 웹팀이 맡아야 하는 프로젝트가 두개였는데, 그중 `Ruby on Rails`로 작성된 프로젝트이다. 말이 rails이지 그냥 `JQuery`로 굉장히 선언적으로 작성되어있는 프로젝트였다. 내가 들어오기 전부터도 유지보수가 정말 힘들다고 알려준 프로젝트여서 마음을 졸이며 확인했는데... WOW!! 그나마 다행(?)이었던 건, 옛날에 SI 유지보수할 때와 비슷한 코드라는 점이었다. 빠르게 성장한 회사이고, 앞선 개발자 분들도 시간에 쫓기며 빠르게 쳐내야 했다고 들어서 이해했다. 하지만 문제가 터질 때마다 해결하기 정말 힘들었던 건 사실이다.

그래도, 모든 회사의 레거시는 일단 respect!

<br />

#### **_협업 컨벤션 만들기_**

아무튼 리팩토링과 더불어 4월과 5월은 프로젝트 세팅하고, 회사 적응하고, 동료와 여러가지 룰을 정하면서 함께 협업하느라 시간이 빨리 갔다. 커밋메시지나 코드 컨벤션 등의 룰을 정해보았는데, 커밋메시지는 기존에 내가 사용하던 컨벤션이 있어 제안했고, 동료 분도 괜찮다고 하여 그렇게 진행했다.

잠깐 말하자면 나는 모든 코드는 결국 CRUD라고 생각한다. 그래서 `Create: blah / Update: blah / Delete: blah`의 형식으로 커밋 메시지를 남기고 있다. 버그 혹은 에러 수정은 `Fix:`로 쓰는데, 이외에 단순 오타 수정이나 정말 별거 아닌 커밋이 존재하기 마련이다. 이런 것은 `Chore:`와 `ETC:` 중에서 고민하다가 후자를 선택했다. 지극히 개인적으로 ETC가 대문자라서 좀더 이렇게 외쳐주는 느낌.

```s
 ETC: 나는 크게 중요하진 않지만 한 커밋 정도는 차지해야 합니다.
```

<br /><br />

---

## 6월

#### **_css도 모듈화가 필요하다구요!_**

이때는 회사에서 모든 팀이 함께 작업해야 하는 큰 sprint가 있었기에, 웹팀도 열심히 작업했다. 특히 디자인 시안이 막 나오고 있던 때여서 마크업 위주로 화면을 설계했다. 마침 마크업을 건드리다보니 프로젝트 전체의 css 구조도 살펴보게 되었다. 그런데 해당 프로젝트 레거시에서 큰 문제 중 하나가 css를 여러 번 import하고, base와 reset의 기능을 하는 코드가 한군데 섞여있는 등 css의 모듈화(?)가 제대로 되어있지 않다는 점이었다.

그래서 여러 번 불리는 css가 한번만 불리도록 하고, font도 한군데서 관리하며, `SASS` 문법을 활용해 전체 구조에서 필요한 css 변수들을 묶었다. 이 과정에서 동료와 함께 `css module`을 도입해 적용하기 시작했다. 이처럼 뷰와 관련된 작업을 주로 했다.

<br />

#### **_어푸어푸, 물이 너무 좋은데 왜 수영을 못할까?_**

회사에서 점심시간에 필라테스를 하러 가는 모임이 있었는데, 평소 운동을 좋아했던 나도 약간 끌렸다. 그런데 마침 회사 근처에 수영장이 점심시간에만 자유수영을 여는 것이었다. 그래서 나는 물을 너무너무너무너무 좋아하지만 수영을 배워본 적 없었기에 혼자 연습도 할 겸 일주일에 3번정도 점심시간에 가기 시작했다. 한 2주 동안은 물만 먹고 앞으로 나아가지도 못했다...

그런데 열심히 회사 중간에 나와서 *어푸어푸*하는 내가 불쌍했는지 안전요원 분께서 한 5분? 10분? 정도 간단하게 자유형을 알려주셨다! 그런데 OMG... 사람은 역시 제대로 배워야 한다는 것을 다시금 깨달았다. 그 짧은 배움만으로도 일주일만에 자유형을 할 수 있게 된 것이다! 물론 여전히 레일 끝까지 가지는 못했지만 발이 닿는 곳까지는 나아갈 수 있었다.

<br /><br />

---

## 7월

#### **_모여서 각자 코딩하지만 지식은 같이 올라가는 magic ☆_**

좋은 자료 공유나 소식을 받기 위해 개발 관련 오픈카톡방에 들어가 있는데, 여기서 `모각코 - 모여서 각자 코딩`을 주도하는 분이 계셨다. 주마다 참여 인원을 모집해서 지식 공유도 하고 개인 공부도 하는 그런 모임이었다. 그래서 같이의 가치(...)를 느끼고 자극을 받고자 한번 가보았는데, 생각보다 집중이 잘됐다. 게다가 역시 *백지장도 맞들면 낫다*는 말처럼 함께 나누고 developing하는 지식이 어마무시했다. 참고로 해당 모임은 [github repository - free study community](https://github.com/limlimlim-study/free-study-community)로 관리되고 있다.

7월은 빠짐없이 매주 수요일마다 갔고, es6+ 문법을 다시 한번 상기시키기 및 공부하고 `nextjs`와 `antd` 등 해보고 싶었던 것들로 간단한 보일러플레이트를 작성했다.

<br />

#### **_실무에서의 첫 테스트 코드_**

회사에서는 7월에 처음으로 테스트 코드를 작성해봤다. 컴포넌트 단위의 통합테스트까지는 여력이 안됐지만, util 함수 등에는 테스트 코드를 작성하기로 했었다. 그래서 마침 날짜 관련 데이터 format이 여러군데서 통일성 없이 쓰여 있었기에 이를 유틸함수로 빼고 테스트 코드를 작성했다. 비록 프로젝트의 전체 coverage를 논할 것도 없는 자그마한 작업이었으나, 실무에서 테스트 코드를 작성해본다는 점이 의미 있었다.

테스트 코드 작성은 일부러 에러를 내면서 코드를 커버하고, 케이스를 생각하면서 작성해야 하기 때문에 처음 시간은 더 드는 것이 사실이다. 그러나 이렇게 작성해두니 이쪽에서 문제가 발생한 적은 (아직까지는) 한번도 없었다. 물론 뭔가 수정했을 때 컴파일 단계에서 테스트가 깨져서 사전에 고친 적은 있지만, 이건 테스트 코드의 존재 이유이자 원했던 바!

<br /><br />

---

## 8월

#### **_SEO 삽질_**

프로젝트 SEO 관련해서 삽질을 좀 했었다. 클라이언트 사이드 렌더링 기반에서 헤드리스 브라우저를 이용한 SEO 작업을 했는데, 뭔가 개발 테스트에서와 라이브에서 의도하는 바가 맞지 않았다. 여러 삽질을 하다가 이런 포스트도 작성했었다. [prerendering](https://wacilpong.github.io/blog/post/prerender-status-code/) 물론 삽질을 한 부분은 해당 포스트에서 작성한 프리렌더와는 무관하게 코드 내에 특정 케이스에 대한 문제였다. 그래도 삽질을 하면서 SEO에 대해 좀 더 알게 되었다!

<br />

#### **_Ruby on rails, 혹은 Javascript(?) 삽질_**

기존 백오피스 페이지에서 이미지를 업로드할 때 S3로 직접 태우는 방식이었는데, 회사에서 이미지 용량을 줄이기 위해 중간에 사내 API로 한번 보내기로 했다. 그래서 업로드하는 부분을 수정해야 했다. 사실 자바스크립트 ajax로 보내도록 수정하는 게 가장 쉬울 거라고 예상할 수 있겠지만, 해당 프로젝트는 자바스크립트쪽 코드가 훨씬 보기가 힘들었다. 게다가 업로드하는 rails쪽 코드만 _샥_ 바꿔서 여러군데 수정하지 않아도 되니까 아예 업로드 관련 모듈로 따로 만들었다.

해당 프로젝트에서 사용중이었던 http 관련 모듈 gem에서 multipart로 post 요청 시 파일을 자꾸 스트링으로 바꾸는 이슈가 있었다. 그래서 multipart 관련 gem을 사용하여 해결했다. 업로드 모듈은 class로 빼고 생성자 함수를 만들어 공통 컨트롤러에서 세션정보를 주입받도록 했다. 그래서 비교적 깔끔하게 해결하리라 생각했지만, 정말 이해가 안되는 문제가 발생했다.

<br />

## 😭

**DOM에 대한 의존은 최소화합시다**

바로 특정 환경에서만 알 수 없는 문자열이 파일 파라미터로 들어오는 것이었다! 특정 브라우저도 아니고, 특정 OS 버전문제도 아니었다. 엄청나게 삽질한 끝에 발견한 것은, 파일을 업로드한 후 해당 썸네일을 그리기 위해 뭔가 굉장히 DOM에 의존적인 방식으로 정규식을 사용해 엘리먼트의 style 속성을 가져와서 replace 하고 있다는 것을 알았다. 이 코드를 분석해본 결과 이미지의 url을 `background: url(...)`에서 가져오고 있었다.

그래서 해당 코드를 모두 지우고 html의 `dataset`을 이용해 미리 url을 가지고 있다가 필요할 때 꺼내는 방식으로 수정했다. 아마 DOM에 너무 의존적이다보니 특정 상황에서 다른 문자열이 정규식을 통해 뽑힌 것 같다.

<br />

#### **_flex 로 grid 해버렸자너, 나만의 공식_**

`flex`로 그리드 레이아웃을 그리는 데 있어서도 삽질을 좀 했다. 해당 css 속성에 박스 정렬을 맞기고 간격값을 계산하지 않는 방법을 고민했는데, 여러 시도를 해보다가 아래처럼 공식을 만들었다! flex가 여분의 공간을 계산해서 보여주는 `space-between`속성을 이용하면서 마지막 row만 왼쪽으로 정렬을 맞춰주는 것이다. 이를 위해서는 마지막 row에만 숨겨진 박스를 심어주면 된다고 생각했다.

```javascript
1. 총 데이터 = 18
2. 한 row에 들어오는 elements = 5
3. 마지막 row에 들어오는 elements = 18 % 5 = 3
4. 마지막 row에 들어와야 할 elements = 5 - (18 % 5) = 2
```

정말 별거 아니지만, 그래도 개인적으로는 코드가 명확한 것 같아서 이러한 공식을 사용하고 있다.

<br />

#### **_동해에는 해파리가 많아요_**

8월말, 여름의 끝자락에 동해로 놀러갔다! 그동안 회사 점심시간에 수영했던 실력을 갈고닦아 여유롭게 바다수영을 해보고 싶었...으나... 내가 갔던 바다만 그런 건지, 아니면 동해가 그런 건지, 파도가 엄청났다. 수심은 얕은데 파도가 쳐서 물싸대귀 맞으면서 수영했다(ㅋㅋ) 스노클링 안경도 가져가서 끼고 해봤는데 물고기는 꽤 보여서 재밌었다. 그런데 해파리가 너무 많이 보여서 징그러웠다. 다음에 동해에서 놀 때는 그냥 튜브 타고 노는 걸로.

<br /><br />

---

## 9월

#### **_프로젝트에 디버깅 툴 적용해보기, ft. sentry_**

웹 프로젝트에 에러 트랙킹 툴이 없어서 서버 에러로만 의존해야 하는 점이 불편했다. 그래서 함께 일하는 동료가 [sentry](https://sentry.io/welcome/)를 알려주어서 한번 파보기 시작했다! 시험삼아 테스트해보니 프로덕션에서 기기별, 브라우저별, 유저의 UI 작동 히스토리까지 나와서 정말 편했다. 그런데 아쉬웠던 점은 자꾸 `.min.js` 소스코드를 참조한다는 점이었다. 그래서 소스맵을 generating하여 참조시켜보았지만 해결되지 않았다. 배포할 때 소스맵을 따로 센트리에 함께 업로드시키는 bash script도 작성해서 `postbuild`훅으로 실행해보았는데도 해결되지 않았다. (ㅠㅠ)

문서에 의하면 아래의 4가지 이유로 소스맵이 깨질 수 있다고 한다.

1. Missing or incorrect source map directive
2. Missing original source files
3. Bad source maps caused by multiple transformations
4. Files are incorrectly versioned or missing versions

<br />

내 생각에는 배포를 aws 등을 통해 자체적으로 구축하면 해결될 수 있을 것 같았다. 프로젝트 자체도 [Create-react-app](https://github.com/facebook/create-react-app)으로 되어 있어 번들링을 제어하기 쉽지 않고, [Netlify](https://www.netlify.com/)로 배포하여 해당 툴을 거쳐서 cdn으로 가기 때문에 중간에서 여러 transformation이 일어나기 때문이다. 그래서 아쉽지만 당장 해결되기 힘들다고 판단하고 보류해두고 있다. 그래도 센트리를 적용해서 많은 에러를 고친 것은 사실이다! 특히 IE, IE, IE...

<br /><br />

---

## 10월

#### **_Webpack 직접 설정해본 소감_**

7월부터 꾸준히 수요일마다 갔던 모각코 모임에서 나만의 무언가를 만들고 싶어서 프로젝트를 시작했다. 특정 영상을 크롤링해서 보여주는 웹앱을 만들고 싶었고, 이를 위해 프로젝트를 세팅했다. 이름하야 [videowl](https://github.com/wacilpong/videowl). 그동안 보일러플레이트 등을 활용해 프로젝트를 구성했어서, [webpack](https://webpack.js.org/)과 같은 트랜스파일링 및 번들링 툴을 직접 설정해본 적이 없다. 그래서 웹팩부터 천천히 적용해봤다. 수요일에만 해서 그런지 한 달동안 웹팩 설정만 한 건 함정...

특히 노드 백엔드와 프론트엔드 configuration을 한 프로젝트 내에서 함께 번들링하는 것을 시도했기에 여러 삽질을 했다. 이 과정에서 웹팩의 로더들, 엔트리와 아웃풋을 지정해 번들링되는 과정 등을 이해할 수 있었다. 물론 아직도 모르는 것 투성이지만! 해당 프로젝트 세팅을 마치고 실제로 크롤러를 구현하다보니 깨달은 점은, 그냥 유튜브 API를 이용해 유튜브의 영상만 크롤링해보는 것이 낫겠다는 것이었다. 그래서 유튜브 API를 클라이언트 사이드에서 활용해 구현해보려고 했..는데 내가 게으른 탓에 방치중. 내년에는 다시 잡아서 잘 해보자!

#### \*\*\*

회사에서 백오피스 페이지를 React 기반으로 다시 만들기로 했는데, 이때부터 차근차근 설정을 시작했다!
